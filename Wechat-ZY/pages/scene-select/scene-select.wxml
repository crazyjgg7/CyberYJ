<view class="container">
  <!-- Top Title Area -->
  <view class="header">
    <text class="title">请拨动法阵</text>
    <text class="subtitle">选择您的学习主题</text>
  </view>

  <!-- Bagua Wheel Area -->
  <view class="wheel-area">
    <!-- Active Indicator (Fixed at Top) -->
    <view class="active-indicator"></view>
    
    <!-- Wheel Container: Rotates based on gesture -->
    <view class="bagua-wheel" 
          style="transform: rotate({{wheelAngle}}deg);" 
          bindtouchstart="onWheelTouchStart" 
          bindtouchmove="onWheelTouchMove" 
          bindtouchend="onWheelTouchEnd">
          
      <!-- Center Decoration (Tai Chi) - Now animated in CSS -->
      <view class="center-taichi"></view>
      
      <!-- 6 Scene Items -->
      <view class="scene-item item-{{index}} {{selectedIndex === index ? 'active' : ''}}" 
            wx:for="{{scenes}}" 
            wx:key="id"
            data-index="{{index}}"
            bindtap="onItemTap">
        
        <!-- Icon Container -->
        <view class="icon-container" style="transform: rotate({{-wheelAngle - (index * 60)}}deg)">
           <!-- Counter-rotate icon to keep it upright as wheel spins AND compensate for item position -->
           <image class="scene-icon" src="../../images/scene-{{item.icon}}.svg" mode="aspectFit"></image>
        </view>
        
        <!-- Name Label -->
        <text class="scene-text" style="transform: rotate({{-wheelAngle - (index * 60)}}deg)">{{item.name}}</text>
      </view>
      
      <!-- Decorative Rings -->
      <view class="ring-outer"></view>
    </view>
  </view>

  <!-- Dynamic Input Area & Action -->
  <view class="input-section">
      <view class="selected-scene-header">
        <text class="selected-label">当前选择：</text>
        <text class="selected-name">{{scenes[selectedIndex].name}}</text>
      </view>
      
      <view class="hint-text">
        <block wx:if="{{scenes[selectedIndex].id === 'career'}}">推荐学习：上下卦结构、卦序和阅读顺序...</block>
        <block wx:elif="{{scenes[selectedIndex].id === 'love'}}">推荐学习：卦辞关键词、白话释义与常见误读...</block>
        <block wx:elif="{{scenes[selectedIndex].id === 'wealth'}}">推荐学习：象辞图景、语境理解与关联文本...</block>
        <block wx:elif="{{scenes[selectedIndex].id === 'health'}}">推荐学习：爻位层次、动爻概念与符号含义...</block>
        <block wx:elif="{{scenes[selectedIndex].id === 'study'}}">推荐学习：五行关系、术语基础与入门路径...</block>
        <block wx:else>可输入你想学习的《周易》问题...</block>
      </view>

      <!-- Quick Question Chips -->
      <view class="chips-container" wx:if="{{quickQuestions && quickQuestions.length > 0}}">
        <block wx:for="{{quickQuestions}}" wx:key="*this">
          <view class="chip" bindtap="fillQuestion" data-question="{{item}}">{{item}}</view>
        </block>
      </view>
      
      <!-- Simplified Input -->
      <input class="simple-input" placeholder="输入学习问题 (选填)" value="{{question}}" bindinput="onQuestionInput" />
      
      <button class="confirm-btn" bindtap="startDivination">进入学习</button>
  </view>
</view>
